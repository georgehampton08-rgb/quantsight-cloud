# QuantSight Complete Endpoint Test\n# Tests all endpoints including new fixes\n\n$BASE = \"https://quantsight-cloud-458498663186.us-central1.run.app\"\n\nWrite-Host \"Testing QuantSight Cloud Endpoints\" -ForegroundColor Cyan\nWrite-Host \"=\" * 60\n\n$results = @()\n\nfunction Test-Endpoint {\n    param(\n        [string]$Name,\n        [string]$Url,\n        [string]$Method = \"GET\"\n    )\n    \n    try {\n        $response = Invoke-RestMethod -Uri $Url -Method $Method -ErrorAction Stop\n        Write-Host \"[PASS] $Name\" -ForegroundColor Green\n        return @{ Name = $Name; Status = \"PASS\"; Response = $response }\n    }\n    catch {\n        Write-Host \"[FAIL] $Name - $($_.Exception.Message)\" -ForegroundColor Red\n        return @{ Name = $Name; Status = \"FAIL\"; Error = $_.Exception.Message }\n    }\n}\n\n# Test Core Endpoints\n$results += Test-Endpoint \"Health Check\" \"$BASE/health\"\n$results += Test-Endpoint \"DB Status\" \"$BASE/admin/db-status\"\n$results += Test-Endpoint \"Teams\" \"$BASE/teams\"\n$results += Test-Endpoint \"Players (All)\" \"$BASE/players\"\n$results += Test-Endpoint \"Player Search\" \"$BASE/players/search?q=LeBron\"\n$results += Test-Endpoint \"Schedule\" \"$BASE/schedule\"\n$results += Test-Endpoint \"Injuries\" \"$BASE/injuries\"\n\n# Test NEW Endpoints\nWrite-Host \"`nTesting NEW Endpoints:\" -ForegroundColor Yellow\n$results += Test-Endpoint \"Matchup Lab Games\" \"$BASE/matchup-lab/games\"\n$results += Test-Endpoint \"Usage Vacuum\" \"$BASE/usage-vacuum/analyze\"\n$results += Test-Endpoint \"Settings Keys (POST)\" \"$BASE/settings/keys\" \"POST\"\n\n# Summary\nWrite-Host \"`n\" \"=\" * 60\nWrite-Host \"Test Summary:\" -ForegroundColor Cyan\n$passed = ($results | Where-Object { $_.Status -eq \"PASS\" }).Count\n$failed = ($results | Where-Object { $_.Status -eq \"FAIL\" }).Count\nWrite-Host \"Passed: $passed / $($results.Count)\" -ForegroundColor Green\nif ($failed -gt 0) {\n    Write-Host \"Failed: $failed\" -ForegroundColor Red\n}\n\n# Check specific responses\nWrite-Host \"`nDetailed Results:\" -ForegroundColor Cyan\n\n$healthCheck = $results | Where-Object { $_.Name -eq \"Health Check\" } | Select-Object -First 1\nif ($healthCheck.Response) {\n    Write-Host \"  Database: $($healthCheck.Response.database_url_set)\" -ForegroundColor White\n    Write-Host \"  Gemini Enabled: $($healthCheck.Response.gemini.enabled)\" -ForegroundColor White\n    Write-Host \"  Firebase Enabled: $($healthCheck.Response.firebase.enabled)\" -ForegroundColor White\n}\n\n$dbStatus = $results | Where-Object { $_.Name -eq \"DB Status\" } | Select-Object -First 1\nif ($dbStatus.Response) {\n    Write-Host \"  Players in DB: $($dbStatus.Response.players)\" -ForegroundColor White\n    Write-Host \"  Teams in DB: $($dbStatus.Response.teams)\" -ForegroundColor White\n}\n\n$players = $results | Where-Object { $_.Name -eq \"Players (All)\" } | Select-Object -First 1\nif ($players.Response) {\n    Write-Host \"  Total Players: $($players.Response.Count)\" -ForegroundColor White\n}\n\nWrite-Host \"`nAll tests complete!\" -ForegroundColor Green\n
